<div dir="rtl">

# ุฑุงูโุงูุฏุงุฒ ููุชุฑุดฺฉู ุจุง ูุงุณุช ุงุดุชุฑุงฺฉ PHP

## ฺุฑุง ุงุฒ ูุงุณุช ุงุดุชุฑุงฺฉ PHP ุงุณุชูุงุฏู ฺฉููุ

- **ููุช ููุงุณุจ:**  
  ูุงุณุชโูุง ุงุดุชุฑุงฺฉ ูุนูููุงู ูุฒููโ ุจุณุงุฑ ฺฉูุชุฑ ูุณุจุช ุจู ุณุฑูุฑูุง ุงุฎุชุตุงุต ุฏุงุฑูุฏ ู ุงู ููุถูุน ุจุฑุง ุจุณุงุฑ ุงุฒ
  ฺฉุงุฑุจุฑุงู ุฌุฐุงุจ ุงุณุช.
- **IPโูุง ุชูุฒ:**  
  ูุงุณุชโูุง ูุนูููุงู ุงุฒ IPโูุง ุชูุฒ ู ูุนุชุจุฑ ุงุณุชูุงุฏู ูโฺฉููุฏ ฺฉู ูโุชูุงูุฏ ุฏุฑ ุนููฺฉุฑุฏ ุจูุชุฑ ููุชุฑุดฺฉู ูุคุซุฑ ุจุงุดุฏ.
- **ูพููุง ุจุงูุฏ ูุงูุญุฏูุฏ:**  
  ุจุณุงุฑ ุงุฒ ุณุฑูุณโุฏููุฏฺฏุงู ูุงุณุชูฺฏ ูพููุง ุจุงูุฏ ูุงูุญุฏูุฏ ุงุฑุงุฆู ูโุฏููุฏ ฺฉู ุงู ูฺฺฏ ุจุฑุง ููุชุฑุดฺฉู ุจุณุงุฑ ููุงุณุจ ุงุณุชุ
  ุฒุฑุง ุจุฏูู ูฺฏุฑุงู ุงุฒ ูุญุฏูุฏุช ูพููุง ุจุงูุฏ ูโุชูุงูุฏ ุงุฒ ุงูุชุฑูุช ุงุณุชูุงุฏู ฺฉูุฏ.
- **ุฑุงูโุงูุฏุงุฒ ุฑุงุญุชโุชุฑ:**  
  ูุฏุฑุช ูุงุณุช ุงุดุชุฑุงฺฉ ู ุฑุงูโุงูุฏุงุฒ ฺฉ ุงุณฺฉุฑูพุช ุณุงุฏู PHP ุจุณุงุฑ ุขุณุงูโุชุฑ ุงุฒ ูุฏุฑุช ุณุฑูุฑ ุงุฎุชุตุงุต ุง ูุฌุงุฒ ุงุณุช.

## ฺู ูุดฺฉูุงุช ูุฌูุฏ ุฏุงุฑุฏุ

- **ูุญุฏูุฏุช ูพุฑูุชฺฉูโูุง:**  
  ูุงุณุชโูุง ุงุดุชุฑุงฺฉ ููฺฉู ุงุณุช ููุท ุงุฒ ูพุฑูุชฺฉูโูุง ูุญุฏูุฏ ูพุดุชุจุงู ฺฉููุฏ ฺฉู ุงู ููุถูุน ูโุชูุงูุฏ ุนููฺฉุฑุฏ ููุชุฑุดฺฉู ุฑุง
  ุชุญุช ุชุฃุซุฑ ูุฑุงุฑ ุฏูุฏ.
- **ููุงุณุจ ูุจูุฏู ุจุฑุง ููุจุงู:**  
  ุงู ุฑูุด ูููุฒ ุจุฑุง ฺฏูุดโูุง ููุฑุงู ุจูููโุณุงุฒ ูุดุฏู ุงุณุช ู ูุงุฒ ุจู ุชูุณุนู ุจุดุชุฑ ุฏุงุฑุฏ.
- **ูพฺุฏฺฏ ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ:**  
  ุงุณุชูุงุฏู ุงุฒ ุงู ููุน ููุชุฑุดฺฉู ููฺฉู ุงุณุช ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ ฺฉู ฺฏุฌโฺฉููุฏู ุจุงุดุฏ ู ูุงุฒ ุจู ุฑุงูููุง ุจุดุชุฑ ุฏุงุดุชู
  ุจุงุดุฏ.

## ฺุทูุฑ ฺฉุงุฑ ูโฺฉูุฏุ

ุจู ุทูุฑ ฺฉู ุงู ุฑูุด ูุดุงุจู ุนููฺฉุฑุฏ ฺฉ **HTTP Proxy** ุงุณุชุ ุงูุง ุจู ุฏูู ูุญุฏูุฏุชโูุงุ ุชูุงูุชโูุง ุฏุฑ ูุญูู ุงุฌุฑุง ูุฌูุฏ ุฏุงุฑุฏ:

1. ุฏุฑุฎูุงุณุช ุงุตู ุฏุณุชฺฉุงุฑ ูโุดูุฏ ุชุง ุจุชูุงู ุขู ุฑุง ุจู ูุงุณุช ูพุฑุงฺฉุณ ุงุฑุณุงู ฺฉุฑุฏ.
2. ูพุณ ุงุฒ ุฑุณุฏู ุฏุฑุฎูุงุณุช ุฏุณุชฺฉุงุฑโุดุฏู ุจู ูุงุณุช ูพุฑุงฺฉุณุ ุฏุฑุฎูุงุณุช ุงุตู ุจุงุฒุงุจ ุดุฏูุ ูพุฑุฏุงุฒุด ูโุดูุฏ ู ูพุงุณุฎ ุจู ฺฉุงุฑุจุฑ
   ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

```ini
==OriginalRequest==>
(local http proxy server: manipulate request to change method and url)
==ManipulatedRequest==>
(proxy shared host: recover original request using script and resolve it and return response)
==Response==>
```

## ุจุงุฏ ุจุง ฺฉ ูุซุงู ุจุฑุฑุณ ฺฉูู

ูุฑุถ ฺฉูุฏ ูโุฎูุงูู ุฏุฑุฎูุงุณุช ุฒุฑ ุฑุง ุจู ุขุฏุฑุณ `www.blocked.com/sensored/content.json` ุงุฑุณุงู ฺฉูู:

```ini
OPTIONS /sensored/content.json HTTP/1.1
User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)
Host: www.blocked.com
Content-Type: application/json

{ "name": "John Doe", "email": "john.doe@example.com" }
```

### ูุญุฏูุฏุชโูุง

- **ูุญุฏูุฏุช ุฏุฑ ูุชุฏ:**  
  ุดุงุฏ ูุชุฏ ุงุตู (ูุงููุฏ `OPTIONS`) ุฑู ูุงุณุช ูพุดุชุจุงู ูุดูุฏุ ูพุณ ุจุงุฏ ูุจู ุงุฒ ุงุฑุณุงูุ ูุชุฏ ุฑุง ุจู `POST` ุชุบุฑ ุฏูู
  ู ุฏุฑ ูุงุณุชุ ุฏูุจุงุฑู ุขู ุฑุง ุจุงุฒุงุจ ฺฉูู.
- **ูุฏุฑ Host:**  
  ูุฏุฑ `Host` ุฏุฑุฎูุงุณุช ุงุตู ุจุง ูุฒุจุงู ูพุฑุงฺฉุณ ูุชูุงูุช ุงุณุช ู ุจุงุฏ ุฌุงฺฏุฒู ุดูุฏ.

### ูพุณ ฺู ุฑุงูโุญู ุฏุงุฑูุ

ุขุฏุฑุณ ุฏุฑุฎูุงุณุช ุฑุง ุทูุฑ ุชุบุฑ ูโุฏูู ฺฉู ุจู ูุงุณุช ูพุฑุงฺฉุณ ุจุฑุณุฏ. ูุซูุงู:

```ini
https://www.blocked.com/sensored/content.json
```

ุชุจุฏู ูโุดูุฏ ุจู:

```ini
https://www.proxy-host.com/inline.php/https_OPTIONS/www.blocked.com/sensored/content.json
```

ูพุณ ุฏุฑ ุงู ุญุงูุชุ ุฏุฑุฎูุงุณุช ุฒุฑ ุจู ุฌุง ุฏุฑุฎูุงุณุช ุงุตู (ุฏุฑ ุงู ูุซุงู ุนู ุฏุฑุฎูุงุณุช ุจุงูุง) ุงุฑุณุงู ูโุดูุฏ:

```http
POST /inline.php/https_OPTIONS/www.blocked.com/sensored/content.json HTTP/1.1
User-Agent: Mozilla/4.0 (compatible; MSIE5.01; Windows NT)
Content-Type: application/json
Host: www.proxy-host.com

{ "name": "John Doe", "email": "john.doe@example.com" }
```

### ุชูุถุญ ุจุฎุดโูุง URL

| ุจุฎุด                                     | ุชูุถุญ                                                                                                                                                                          |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `https://www.proxy-host.com/inline.php` | ูุณุฑ ุงุณฺฉุฑูพุช ุฑู ูุงุณุช ุงุดุชุฑุงฺฉ. ูโุชูุงูุฏ ุจู ุนููุงู ุชูฺฉู ุจุฑุง ูุฑ ฺฉุงุฑุจุฑ ูุฒ ุนูู ฺฉูุฏ. ุนู ุงุณฺฉุฑูพุช ูุชูุงูุฏ ุฑู ูุงู `unpredictable_personal_token.php` ุจู ุฌุง `inline.php` ูุงุณุช ุดูุฏ |
| `https_OPTIONS`                         | ุจุฎุด ฺฉุงููฺฏ: ูพุฑูุชฺฉู ู ูุชุฏ. ุจุง `_` ุฌุฏุง ูโุดููุฏ ู ุงุฎุชุงุฑโุงูุฏ. ูโุชูุงูุฏ `debug` ูู ุงุถุงูู ฺฉูุฏ (`https_OPTIONS_debug`).                                                           |
| `www.blocked.com/sensored/content.json` | ุขุฏุฑุณ ุงุตู ุฏุฑุฎูุงุณุช ููุฑุงู ุจุง ุชูุงู ูพุงุฑุงูุชุฑูุง.                                                                                                                                     |

## ุขุง ุจุงุฏ ุฏุณุช URLโูุง ุฑุง ุชุบุฑ ุฏููุ

ุฎุฑ. ุจุฑุง ุงู ฺฉุงุฑ ุงุฒ **MitmProxy** ุงุณุชูุงุฏู ูโฺฉูู ุชุง ุฏุฑุฎูุงุณุชโูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุณุชฺฉุงุฑ ุดููุฏ. ูุงูโูุง ููุฑุฏ ูุงุฒ
ุฏุฑ ูุณุฑ `client/inline.py` ูุฑุงุฑ ุฏุงุฑูุฏ.

### ูุฑุงุญู ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

1. ุฑูพูุฒุชูุฑ ุฑุง ฺฉููู ฺฉูุฏ ุชุง ูุงูโูุง ุฑุง ุฏุฑ ุงุฎุชุงุฑ ุฏุงุดุชู ุจุงุดุฏ.
2. ฺฉ ุงุฒ ูุณุฎูโูุง ูพุฑุชุงุจู MitmProxy ุฑุง ุงุฒ  
   <https://www.mitmproxy.org/downloads/> ุฏุงูููุฏ ฺฉุฑุฏู ู ูุงู `mitmdump.exe` ุฑุง ุจู ูพูุดู `client` ููุชูู ฺฉูุฏ.
3. ฺฏูุงูโูุง MitmProxy ุฑุง ูุตุจ ฺฉูุฏ:

   - ฺฉ ุจุงุฑ `mitmdump.exe` ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ูุงูโูุง ฺฏูุงู ุงุฌุงุฏ ุดููุฏ.
   - ุณูพุณ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

     ```bash
     certutil -addstore root "%USERPROFILE%\.mitmproxy\mitmproxy-ca-cert.cer"
     ```

   - ุจุฑุง ูุฑูุฑฺฏุฑ Firefox ูุฑุงุญู ุงุถุงู ุฑุง ุทุจู ุฑุงูููุง ุงูุฌุงู ุฏูุฏ.

4. ูุงู `config.ini.default` ุฑุง ุจู `config.ini` ุชุบุฑ ูุงู ุฏุงุฏู ู ููุงุฏุฑ ุฒุฑ ุฑุง ูุฑุงุด ฺฉูุฏ:

   ```ini
   [inline]
   url=https://proxy-php-host.com/inline.php
   ; host_header=proxy-php-host.com
   ```

   ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ IP:

   ```ini
   [inline]
   url=https://100.100.100.100/inline.php
   host_header=proxy-php-host.com
   ```

5. MitmProxy ุฑุง ุจุง ูพุงุฑุงูุชุฑูุง ุฒุฑ ุงุฌุฑุง ฺฉูุฏ:

   ```bash
   .\mitmdump.exe -q -s inline.py \
     --set listen_port=8080 \
     --set flow_detail=0 \
     --set connection_strategy=lazy \
     --set ssl_insecure=true \
     --set stream_large_bodies=128k
   ```

6. ุชูุงู ุดุฏ! ุฏุฑ ุชูุธูุงุช ุณุณุชู ููุฏูุฒุ ูพุฑุงฺฉุณ ุฑุง ุฑู `127.0.0.1` ู ูพูุฑุช ุฑุง ุจุฑุงุจุฑ `listen_port` (ุงูุฌุง 8080) ูุฑุงุฑ ุฏูุฏ. ๐

</div>
